-- Luma Hub UI Library
-- Inspired by Onion UI with smooth animations and mobile/PC compatibility
-- Created with love ‚ù§Ô∏è

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local LumaHub = {}
LumaHub.__index = LumaHub

-- Theme Colors
local Theme = {
    Background = Color3.fromRGB(15, 15, 20),
    Secondary = Color3.fromRGB(25, 25, 35),
    Accent = Color3.fromRGB(138, 43, 226), -- Purple
    AccentHover = Color3.fromRGB(158, 63, 246),
    Text = Color3.fromRGB(255, 255, 255),
    SubText = Color3.fromRGB(180, 180, 190),
    Border = Color3.fromRGB(60, 60, 80),
    Success = Color3.fromRGB(46, 204, 113),
    Danger = Color3.fromRGB(231, 76, 60),
    Warning = Color3.fromRGB(241, 196, 15)
}

-- Utility Functions
local function tween(instance, properties, duration, style, direction)
    style = style or Enum.EasingStyle.Quint
    direction = direction or Enum.EasingDirection.Out
    local tweenInfo = TweenInfo.new(duration, style, direction)
    local tween = TweenService:Create(instance, tweenInfo, properties)
    tween:Play()
    return tween
end

local function ripple(button, x, y)
    local circle = Instance.new("ImageLabel")
    circle.Image = "rbxassetid://266543268"
    circle.ImageColor3 = Color3.fromRGB(255, 255, 255)
    circle.ImageTransparency = 0.5
    circle.BackgroundTransparency = 1
    circle.ZIndex = 10
    circle.Position = UDim2.new(0, x, 0, y)
    circle.Size = UDim2.new(0, 0, 0, 0)
    circle.Parent = button

    tween(circle, {
        Size = UDim2.new(0, 500, 0, 500),
        Position = UDim2.new(0, x - 250, 0, y - 250),
        ImageTransparency = 1
    }, 0.6, Enum.EasingStyle.Exponential)

    task.delay(0.6, function()
        circle:Destroy()
    end)
end

local function createCorner(parent, radius)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, radius or 12)
    corner.Parent = parent
    return corner
end

local function createStroke(parent, color, thickness)
    local stroke = Instance.new("UIStroke")
    stroke.Color = color or Theme.Border
    stroke.Thickness = thickness or 1
    stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    stroke.Parent = parent
    return stroke
end

local function createGlow(parent)
    local glow = Instance.new("ImageLabel")
    glow.Image = "rbxassetid://4996891970"
    glow.ImageColor3 = Theme.Accent
    glow.ImageTransparency = 0.7
    glow.Size = UDim2.new(1, 40, 1, 40)
    glow.Position = UDim2.new(0, -20, 0, -20)
    glow.BackgroundTransparency = 1
    glow.ZIndex = 0
    glow.Parent = parent
    return glow
end

-- Main Library
function LumaHub:New(title)
    local gui = Instance.new("ScreenGui")
    gui.Name = "LumaHub"
    gui.ResetOnSpawn = false
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    gui.Parent = player:WaitForChild("PlayerGui")

    local main = Instance.new("Frame")
    main.Name = "Main"
    main.Size = UDim2.new(0, 0, 0, 0)
    main.Position = UDim2.new(0.5, 0, 0.5, 0)
    main.AnchorPoint = Vector2.new(0.5, 0.5)
    main.BackgroundColor3 = Theme.Background
    main.BorderSizePixel = 0
    main.ClipsDescendants = true
    main.Parent = gui

    createCorner(main, 16)
    createStroke(main, Theme.Border, 2)
    createGlow(main)

    -- Header
    local header = Instance.new("Frame")
    header.Name = "Header"
    header.Size = UDim2.new(1, 0, 0, 60)
    header.BackgroundColor3 = Theme.Secondary
    header.BorderSizePixel = 0
    header.Parent = main

    createCorner(header, 16)

    local headerGradient = Instance.new("UIGradient")
    headerGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Theme.Accent),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(75, 0, 130))
    })
    headerGradient.Rotation = 45
    headerGradient.Parent = header

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Size = UDim2.new(1, -80, 1, 0)
    titleLabel.Position = UDim2.new(0, 20, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title or "Luma Hub"
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 24
    titleLabel.TextColor3 = Theme.Text
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = header

    -- Close Button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Name = "CloseButton"
    closeBtn.Size = UDim2.new(0, 40, 0, 40)
    closeBtn.Position = UDim2.new(1, -50, 0, 10)
    closeBtn.BackgroundColor3 = Theme.Danger
    closeBtn.Text = "‚úï"
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 20
    closeBtn.TextColor3 = Theme.Text
    closeBtn.BorderSizePixel = 0
    closeBtn.Parent = header

    createCorner(closeBtn, 10)

    closeBtn.MouseButton1Click:Connect(function()
        tween(main, {Size = UDim2.new(0, 0, 0, 0)}, 0.3)
        task.wait(0.3)
        gui:Destroy()
    end)

    closeBtn.MouseEnter:Connect(function()
        tween(closeBtn, {BackgroundColor3 = Color3.fromRGB(255, 96, 80)}, 0.2)
        tween(closeBtn, {Size = UDim2.new(0, 44, 0, 44)}, 0.2, Enum.EasingStyle.Back)
    end)

    closeBtn.MouseLeave:Connect(function()
        tween(closeBtn, {BackgroundColor3 = Theme.Danger}, 0.2)
        tween(closeBtn, {Size = UDim2.new(0, 40, 0, 40)}, 0.2, Enum.EasingStyle.Back)
    end)

    -- Tab Container
    local tabContainer = Instance.new("Frame")
    tabContainer.Name = "TabContainer"
    tabContainer.Size = UDim2.new(0, 150, 1, -70)
    tabContainer.Position = UDim2.new(0, 10, 0, 65)
    tabContainer.BackgroundColor3 = Theme.Secondary
    tabContainer.BorderSizePixel = 0
    tabContainer.Parent = main

    createCorner(tabContainer, 12)

    local tabList = Instance.new("UIListLayout")
    tabList.Padding = UDim.new(0, 8)
    tabList.SortOrder = Enum.SortOrder.LayoutOrder
    tabList.Parent = tabContainer

    local tabPadding = Instance.new("UIPadding")
    tabPadding.PaddingTop = UDim.new(0, 10)
    tabPadding.PaddingBottom = UDim.new(0, 10)
    tabPadding.PaddingLeft = UDim.new(0, 10)
    tabPadding.PaddingRight = UDim.new(0, 10)
    tabPadding.Parent = tabContainer

    -- Content Container
    local contentContainer = Instance.new("Frame")
    contentContainer.Name = "ContentContainer"
    contentContainer.Size = UDim2.new(1, -180, 1, -70)
    contentContainer.Position = UDim2.new(0, 170, 0, 65)
    contentContainer.BackgroundTransparency = 1
    contentContainer.BorderSizePixel = 0
    contentContainer.Parent = main

    -- Dragging functionality
    local dragging = false
    local dragStart, startPos

    header.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = main.Position
        end
    end)

    header.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            tween(main, {
                Position = UDim2.new(
                    startPos.X.Scale,
                    startPos.X.Offset + delta.X,
                    startPos.Y.Scale,
                    startPos.Y.Offset + delta.Y
                )
            }, 0.1, Enum.EasingStyle.Linear)
        end
    end)

    -- Animate opening
    tween(main, {Size = UDim2.new(0, 700, 0, 500)}, 0.5, Enum.EasingStyle.Back)

    local library = setmetatable({
        GUI = gui,
        Main = main,
        TabContainer = tabContainer,
        ContentContainer = contentContainer,
        Tabs = {},
        CurrentTab = nil
    }, LumaHub)

    return library
end

function LumaHub:CreateTab(name, icon)
    local tabButton = Instance.new("TextButton")
    tabButton.Name = name
    tabButton.Size = UDim2.new(1, 0, 0, 45)
    tabButton.BackgroundColor3 = Theme.Background
    tabButton.BorderSizePixel = 0
    tabButton.Text = ""
    tabButton.AutoButtonColor = false
    tabButton.Parent = self.TabContainer

    createCorner(tabButton, 10)

    local tabIcon = Instance.new("TextLabel")
    tabIcon.Size = UDim2.new(0, 30, 1, 0)
    tabIcon.Position = UDim2.new(0, 10, 0, 0)
    tabIcon.BackgroundTransparency = 1
    tabIcon.Text = icon or "üì¶"
    tabIcon.Font = Enum.Font.GothamBold
    tabIcon.TextSize = 20
    tabIcon.TextColor3 = Theme.SubText
    tabIcon.Parent = tabButton

    local tabLabel = Instance.new("TextLabel")
    tabLabel.Size = UDim2.new(1, -50, 1, 0)
    tabLabel.Position = UDim2.new(0, 45, 0, 0)
    tabLabel.BackgroundTransparency = 1
    tabLabel.Text = name
    tabLabel.Font = Enum.Font.GothamSemibold
    tabLabel.TextSize = 14
    tabLabel.TextColor3 = Theme.SubText
    tabLabel.TextXAlignment = Enum.TextXAlignment.Left
    tabLabel.Parent = tabButton

    local tabContent = Instance.new("ScrollingFrame")
    tabContent.Name = name .. "Content"
    tabContent.Size = UDim2.new(1, 0, 1, 0)
    tabContent.BackgroundTransparency = 1
    tabContent.BorderSizePixel = 0
    tabContent.ScrollBarThickness = 4
    tabContent.ScrollBarImageColor3 = Theme.Accent
    tabContent.Visible = false
    tabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
    tabContent.AutomaticCanvasSize = Enum.AutomaticSize.Y
    tabContent.Parent = self.ContentContainer

    local contentList = Instance.new("UIListLayout")
    contentList.Padding = UDim.new(0, 12)
    contentList.SortOrder = Enum.SortOrder.LayoutOrder
    contentList.Parent = tabContent

    local contentPadding = Instance.new("UIPadding")
    contentPadding.PaddingTop = UDim.new(0, 10)
    contentPadding.PaddingBottom = UDim.new(0, 10)
    contentPadding.PaddingLeft = UDim.new(0, 10)
    contentPadding.PaddingRight = UDim.new(0, 20)
    contentPadding.Parent = tabContent

    local function selectTab()
        for _, tab in pairs(self.Tabs) do
            tab.Button.BackgroundColor3 = Theme.Background
            tab.Label.TextColor3 = Theme.SubText
            tab.Icon.TextColor3 = Theme.SubText
            tab.Content.Visible = false
        end

        tween(tabButton, {BackgroundColor3 = Theme.Accent}, 0.3)
        tween(tabLabel, {TextColor3 = Theme.Text}, 0.3)
        tween(tabIcon, {TextColor3 = Theme.Text}, 0.3)
        tabContent.Visible = true
        self.CurrentTab = name
    end

    tabButton.MouseButton1Click:Connect(function()
        selectTab()
        ripple(tabButton, tabButton.AbsoluteSize.X / 2, tabButton.AbsoluteSize.Y / 2)
    end)

    tabButton.MouseEnter:Connect(function()
        if self.CurrentTab ~= name then
            tween(tabButton, {BackgroundColor3 = Theme.Secondary}, 0.2)
        end
    end)

    tabButton.MouseLeave:Connect(function()
        if self.CurrentTab ~= name then
            tween(tabButton, {BackgroundColor3 = Theme.Background}, 0.2)
        end
    end)

    local tab = {
        Button = tabButton,
        Label = tabLabel,
        Icon = tabIcon,
        Content = tabContent,
        Elements = {}
    }

    self.Tabs[name] = tab

    if not self.CurrentTab then
        selectTab()
    end

    return tab
end

function LumaHub:AddButton(tab, text, callback)
    local button = Instance.new("TextButton")
    button.Name = "Button"
    button.Size = UDim2.new(1, 0, 0, 45)
    button.BackgroundColor3 = Theme.Secondary
    button.BorderSizePixel = 0
    button.Text = text
    button.Font = Enum.Font.GothamSemibold
    button.TextSize = 14
    button.TextColor3 = Theme.Text
    button.AutoButtonColor = false
    button.Parent = tab.Content

    createCorner(button, 10)

    button.MouseButton1Click:Connect(function()
        ripple(button, button.AbsoluteSize.X / 2, button.AbsoluteSize.Y / 2)
        pcall(callback)
    end)

    button.MouseEnter:Connect(function()
        tween(button, {BackgroundColor3 = Theme.Accent}, 0.2)
    end)

    button.MouseLeave:Connect(function()
        tween(button, {BackgroundColor3 = Theme.Secondary}, 0.2)
    end)

    table.insert(tab.Elements, button)
    return button
end

function LumaHub:AddToggle(tab, text, default, callback)
    local frame = Instance.new("Frame")
    frame.Name = "Toggle"
    frame.Size = UDim2.new(1, 0, 0, 45)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    createCorner(frame, 10)

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -70, 1, 0)
    label.Position = UDim2.new(0, 15, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 14
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local toggleButton = Instance.new("TextButton")
    toggleButton.Size = UDim2.new(0, 50, 0, 26)
    toggleButton.Position = UDim2.new(1, -60, 0.5, -13)
    toggleButton.BackgroundColor3 = default and Theme.Success or Theme.Border
    toggleButton.BorderSizePixel = 0
    toggleButton.Text = ""
    toggleButton.AutoButtonColor = false
    toggleButton.Parent = frame

    createCorner(toggleButton, 13)

    local toggleCircle = Instance.new("Frame")
    toggleCircle.Size = UDim2.new(0, 20, 0, 20)
    toggleCircle.Position = default and UDim2.new(1, -23, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
    toggleCircle.BackgroundColor3 = Theme.Text
    toggleCircle.BorderSizePixel = 0
    toggleCircle.Parent = toggleButton

    createCorner(toggleCircle, 10)

    local toggled = default or false

    toggleButton.MouseButton1Click:Connect(function()
        toggled = not toggled

        tween(toggleButton, {
            BackgroundColor3 = toggled and Theme.Success or Theme.Border
        }, 0.3)

        tween(toggleCircle, {
            Position = toggled and UDim2.new(1, -23, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
        }, 0.3, Enum.EasingStyle.Back)

        pcall(callback, toggled)
    end)

    toggleButton.MouseEnter:Connect(function()
        tween(toggleCircle, {Size = UDim2.new(0, 22, 0, 22)}, 0.2)
    end)

    toggleButton.MouseLeave:Connect(function()
        tween(toggleCircle, {Size = UDim2.new(0, 20, 0, 20)}, 0.2)
    end)

    table.insert(tab.Elements, frame)
    return frame
end

function LumaHub:AddSlider(tab, text, min, max, default, callback)
    local frame = Instance.new("Frame")
    frame.Name = "Slider"
    frame.Size = UDim2.new(1, 0, 0, 60)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    createCorner(frame, 10)

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -70, 0, 20)
    label.Position = UDim2.new(0, 15, 0, 8)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 14
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local valueLabel = Instance.new("TextLabel")
    valueLabel.Size = UDim2.new(0, 60, 0, 20)
    valueLabel.Position = UDim2.new(1, -70, 0, 8)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = tostring(default)
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.TextSize = 14
    valueLabel.TextColor3 = Theme.Accent
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.Parent = frame

    local sliderBack = Instance.new("Frame")
    sliderBack.Size = UDim2.new(1, -30, 0, 6)
    sliderBack.Position = UDim2.new(0, 15, 1, -20)
    sliderBack.BackgroundColor3 = Theme.Background
    sliderBack.BorderSizePixel = 0
    sliderBack.Parent = frame

    createCorner(sliderBack, 3)

    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    sliderFill.BackgroundColor3 = Theme.Accent
    sliderFill.BorderSizePixel = 0
    sliderFill.Parent = sliderBack

    createCorner(sliderFill, 3)

    local sliderButton = Instance.new("TextButton")
    sliderButton.Size = UDim2.new(0, 18, 0, 18)
    sliderButton.Position = UDim2.new((default - min) / (max - min), -9, 0.5, -9)
    sliderButton.BackgroundColor3 = Theme.Text
    sliderButton.BorderSizePixel = 0
    sliderButton.Text = ""
    sliderButton.AutoButtonColor = false
    sliderButton.Parent = sliderBack

    createCorner(sliderButton, 9)

    local dragging = false

    local function update(input)
        local pos = math.clamp((input.Position.X - sliderBack.AbsolutePosition.X) / sliderBack.AbsoluteSize.X, 0, 1)
        local value = math.floor(min + (max - min) * pos)

        tween(sliderFill, {Size = UDim2.new(pos, 0, 1, 0)}, 0.1, Enum.EasingStyle.Linear)
        tween(sliderButton, {Position = UDim2.new(pos, -9, 0.5, -9)}, 0.1, Enum.EasingStyle.Linear)
        valueLabel.Text = tostring(value)

        pcall(callback, value)
    end

    sliderButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            tween(sliderButton, {Size = UDim2.new(0, 22, 0, 22)}, 0.2)
        end
    end)

    sliderButton.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
            tween(sliderButton, {Size = UDim2.new(0, 18, 0, 18)}, 0.2)
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            update(input)
        end
    end)

    sliderBack.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            update(input)
        end
    end)

    table.insert(tab.Elements, frame)
    return frame
end

function LumaHub:AddTextbox(tab, text, placeholder, callback)
    local frame = Instance.new("Frame")
    frame.Name = "Textbox"
    frame.Size = UDim2.new(1, 0, 0, 45)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    createCorner(frame, 10)

    local textbox = Instance.new("TextBox")
    textbox.Size = UDim2.new(1, -30, 1, -10)
    textbox.Position = UDim2.new(0, 15, 0, 5)
    textbox.BackgroundTransparency = 1
    textbox.PlaceholderText = placeholder or text
    textbox.Text = ""
    textbox.Font = Enum.Font.GothamSemibold
    textbox.TextSize = 14
    textbox.TextColor3 = Theme.Text
    textbox.PlaceholderColor3 = Theme.SubText
    textbox.TextXAlignment = Enum.TextXAlignment.Left
    textbox.ClearTextOnFocus = false
    textbox.Parent = frame

    textbox.Focused:Connect(function()
        tween(frame, {BackgroundColor3 = Theme.Accent}, 0.2)
    end)

    textbox.FocusLost:Connect(function(enter)
        tween(frame, {BackgroundColor3 = Theme.Secondary}, 0.2)
        if enter then
            pcall(callback, textbox.Text)
        end
    end)

    table.insert(tab.Elements, frame)
    return textbox
end

function LumaHub:AddLabel(tab, text)
    local label = Instance.new("TextLabel")
    label.Name = "Label"
    label.Size = UDim2.new(1, 0, 0, 30)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.Gotham
    label.TextSize = 13
    label.TextColor3 = Theme.SubText
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = tab.Content

    table.insert(tab.Elements, label)
    return label
end

function LumaHub:AddDropdown(tab, text, options, callback)
    local frame = Instance.new("Frame")
    frame.Name = "Dropdown"
    frame.Size = UDim2.new(1, 0, 0, 45)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    createCorner(frame, 10)

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 1, 0)
    button.BackgroundTransparency = 1
    button.Text = ""
    button.Parent = frame

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -40, 1, 0)
    label.Position = UDim2.new(0, 15, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 14
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local arrow = Instance.new("TextLabel")
    arrow.Size = UDim2.new(0, 20, 1, 0)
    arrow.Position = UDim2.new(1, -30, 0, 0)
    arrow.BackgroundTransparency = 1
    arrow.Text = "‚ñº"
    arrow.Font = Enum.Font.GothamBold
    arrow.TextSize = 12
    arrow.TextColor3 = Theme.SubText
    arrow.Parent = frame

    local dropdown = Instance.new("Frame")
    dropdown.Name = "DropdownList"
    dropdown.Size = UDim2.new(1, 0, 0, 0)
    dropdown.Position = UDim2.new(0, 0, 1, 5)
    dropdown.BackgroundColor3 = Theme.Secondary
    dropdown.BorderSizePixel = 0
    dropdown.ClipsDescendants = true
    dropdown.Visible = false
    dropdown.ZIndex = 5
    dropdown.Parent = frame

    createCorner(dropdown, 10)
    createStroke(dropdown, Theme.Border, 1)

    local dropdownList = Instance.new("UIListLayout")
    dropdownList.Padding = UDim.new(0, 2)
    dropdownList.SortOrder = Enum.SortOrder.LayoutOrder
    dropdownList.Parent = dropdown

    local dropdownPadding = Instance.new("UIPadding")
    dropdownPadding.PaddingTop = UDim.new(0, 5)
    dropdownPadding.PaddingBottom = UDim.new(0, 5)
    dropdownPadding.PaddingLeft = UDim.new(0, 5)
    dropdownPadding.PaddingRight = UDim.new(0, 5)
    dropdownPadding.Parent = dropdown

    local isOpen = false

    for _, option in ipairs(options) do
        local optionButton = Instance.new("TextButton")
        optionButton.Size = UDim2.new(1, 0, 0, 35)
        optionButton.BackgroundColor3 = Theme.Background
        optionButton.Text = option
        optionButton.Font = Enum.Font.Gotham
        optionButton.TextSize = 13
        optionButton.TextColor3 = Theme.Text
        optionButton.AutoButtonColor = false
        optionButton.Parent = dropdown

        createCorner(optionButton, 8)

        optionButton.MouseButton1Click:Connect(function()
            label.Text = text .. ": " .. option
            isOpen = false
            tween(dropdown, {Size = UDim2.new(1, 0, 0, 0)}, 0.3, Enum.EasingStyle.Back)
            tween(arrow, {Rotation = 0}, 0.3)
            task.wait(0.3)
            dropdown.Visible = false
            pcall(callback, option)
        end)

        optionButton.MouseEnter:Connect(function()
            tween(optionButton, {BackgroundColor3 = Theme.Accent}, 0.2)
        end)

        optionButton.MouseLeave:Connect(function()
            tween(optionButton, {BackgroundColor3 = Theme.Background}, 0.2)
        end)
    end

    button.MouseButton1Click:Connect(function()
        isOpen = not isOpen
        dropdown.Visible = true

        if isOpen then
            local height = math.min(#options * 37 + 10, 200)
            tween(dropdown, {Size = UDim2.new(1, 0, 0, height)}, 0.3, Enum.EasingStyle.Back)
            tween(arrow, {Rotation = 180}, 0.3)
        else
            tween(dropdown, {Size = UDim2.new(1, 0, 0, 0)}, 0.3, Enum.EasingStyle.Back)
            tween(arrow, {Rotation = 0}, 0.3)
            task.wait(0.3)
            dropdown.Visible = false
        end
    end)

    table.insert(tab.Elements, frame)
    return frame
end

function LumaHub:AddColorPicker(tab, text, default, callback)
    local frame = Instance.new("Frame")
    frame.Name = "ColorPicker"
    frame.Size = UDim2.new(1, 0, 0, 45)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    createCorner(frame, 10)

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -60, 1, 0)
    label.Position = UDim2.new(0, 15, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 14
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local colorButton = Instance.new("TextButton")
    colorButton.Size = UDim2.new(0, 35, 0, 35)
    colorButton.Position = UDim2.new(1, -45, 0.5, -17.5)
    colorButton.BackgroundColor3 = default or Color3.fromRGB(255, 255, 255)
    colorButton.Text = ""
    colorButton.AutoButtonColor = false
    colorButton.Parent = frame

    createCorner(colorButton, 8)
    createStroke(colorButton, Theme.Border, 2)

    local currentColor = default or Color3.fromRGB(255, 255, 255)

    colorButton.MouseButton1Click:Connect(function()
        -- Simple color picker (cycles through rainbow)
        local hue = tick() % 5 / 5
        currentColor = Color3.fromHSV(hue, 1, 1)
        tween(colorButton, {BackgroundColor3 = currentColor}, 0.3)
        pcall(callback, currentColor)
    end)

    colorButton.MouseEnter:Connect(function()
        tween(colorButton, {Size = UDim2.new(0, 38, 0, 38)}, 0.2, Enum.EasingStyle.Back)
    end)

    colorButton.MouseLeave:Connect(function()
        tween(colorButton, {Size = UDim2.new(0, 35, 0, 35)}, 0.2, Enum.EasingStyle.Back)
    end)

    -- Rainbow animation
    RunService.RenderStepped:Connect(function()
        local hue = (tick() % 10) / 10
        colorButton.BackgroundColor3 = Color3.fromHSV(hue, 0.5, 1)
    end)

    table.insert(tab.Elements, frame)
    return frame
end

function LumaHub:AddKeybind(tab, text, default, callback)
    local frame = Instance.new("Frame")
    frame.Name = "Keybind"
    frame.Size = UDim2.new(1, 0, 0, 45)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    createCorner(frame, 10)

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -100, 1, 0)
    label.Position = UDim2.new(0, 15, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 14
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local keybindButton = Instance.new("TextButton")
    keybindButton.Size = UDim2.new(0, 80, 0, 30)
    keybindButton.Position = UDim2.new(1, -90, 0.5, -15)
    keybindButton.BackgroundColor3 = Theme.Background
    keybindButton.Text = default or "None"
    keybindButton.Font = Enum.Font.GothamBold
    keybindButton.TextSize = 12
    keybindButton.TextColor3 = Theme.Accent
    keybindButton.AutoButtonColor = false
    keybindButton.Parent = frame

    createCorner(keybindButton, 8)

    local binding = false
    local currentKey = default

    keybindButton.MouseButton1Click:Connect(function()
        binding = true
        keybindButton.Text = "..."
        tween(keybindButton, {BackgroundColor3 = Theme.Accent}, 0.2)
    end)

    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if binding and not gameProcessed then
            if input.KeyCode ~= Enum.KeyCode.Unknown then
                currentKey = input.KeyCode.Name
                keybindButton.Text = currentKey
                binding = false
                tween(keybindButton, {BackgroundColor3 = Theme.Background}, 0.2)
                pcall(callback, input.KeyCode)
            end
        elseif not binding and currentKey and input.KeyCode.Name == currentKey then
            pcall(callback, input.KeyCode)
        end
    end)

    table.insert(tab.Elements, frame)
    return frame
end

function LumaHub:Notify(title, text, duration, type)
    local notif = Instance.new("Frame")
    notif.Size = UDim2.new(0, 0, 0, 80)
    notif.Position = UDim2.new(1, 10, 1, -90)
    notif.BackgroundColor3 = Theme.Secondary
    notif.BorderSizePixel = 0
    notif.ZIndex = 10
    notif.Parent = self.GUI

    createCorner(notif, 12)
    createStroke(notif, Theme.Border, 2)

    local icon = Instance.new("TextLabel")
    icon.Size = UDim2.new(0, 50, 1, 0)
    icon.BackgroundTransparency = 1
    icon.Font = Enum.Font.GothamBold
    icon.TextSize = 28
    icon.TextColor3 = type == "success" and Theme.Success or type == "error" and Theme.Danger or type == "warning" and Theme.Warning or Theme.Accent
    icon.Text = type == "success" and "‚úì" or type == "error" and "‚úï" or type == "warning" and "‚ö†" or "‚Ñπ"
    icon.Parent = notif

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, -60, 0, 25)
    titleLabel.Position = UDim2.new(0, 55, 0, 10)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 15
    titleLabel.TextColor3 = Theme.Text
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = notif

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, -60, 0, 35)
    textLabel.Position = UDim2.new(0, 55, 0, 35)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = text
    textLabel.Font = Enum.Font.Gotham
    textLabel.TextSize = 12
    textLabel.TextColor3 = Theme.SubText
    textLabel.TextXAlignment = Enum.TextXAlignment.Left
    textLabel.TextWrapped = true
    textLabel.Parent = notif

    -- Animate in
    tween(notif, {
        Size = UDim2.new(0, 350, 0, 80),
        Position = UDim2.new(1, -360, 1, -90)
    }, 0.5, Enum.EasingStyle.Back)

    -- Progress bar
    local progress = Instance.new("Frame")
    progress.Size = UDim2.new(1, 0, 0, 3)
    progress.Position = UDim2.new(0, 0, 1, -3)
    progress.BackgroundColor3 = type == "success" and Theme.Success or type == "error" and Theme.Danger or type == "warning" and Theme.Warning or Theme.Accent
    progress.BorderSizePixel = 0
    progress.Parent = notif

    tween(progress, {Size = UDim2.new(0, 0, 0, 3)}, duration or 3, Enum.EasingStyle.Linear)

    -- Animate out
    task.wait(duration or 3)
    tween(notif, {
        Position = UDim2.new(1, 10, 1, -90)
    }, 0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In)

    task.wait(0.3)
    notif:Destroy()
end

return LumaHub
