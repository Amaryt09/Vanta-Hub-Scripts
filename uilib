--[[
    Velour UI Library v2.0
    Style: Sleek, Modern, Responsive, Animated
    Author: AI Assistant
]]

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local CollectionService = game:GetService("CollectionService")

local Library = {}

--// Theme Configuration
Library.Theme = {
    -- Base Colors
    Primary = Color3.fromRGB(25, 25, 30),       -- Dark background
    Secondary = Color3.fromRGB(35, 35, 40),     -- Slightly lighter background for elements
    Accent = Color3.fromRGB(0, 150, 255),       -- Vibrant Blue
    Outline = Color3.fromRGB(50, 50, 55),       -- Subtle outline
    Text = Color3.fromRGB(240, 240, 240),       -- White text
    TextMuted = Color3.fromRGB(150, 150, 150),  -- Grey text
    
    -- Gradients (for richer backgrounds)
    PrimaryGradient = {Color3.fromRGB(20, 20, 25), Color3.fromRGB(30, 30, 35)},
    SecondaryGradient = {Color3.fromRGB(30, 30, 35), Color3.fromRGB(40, 40, 45)},
    
    -- Shadows (for depth, will be simulated with UIGradient)
    ShadowColor = Color3.fromRGB(0, 0, 0),
    ShadowTransparency = 0.7
}

--// Responsive Design Parameters
Library.Responsive = {
    MobileBreakpoint = 800, -- Pixels. Screens smaller than this are considered 'Mobile'
    DesktopScale = 1,
    MobileScale = 0.85,
    DesktopSpacing = 10,
    MobileSpacing = 8
}

--// Utility Functions
local function CreateGradient(Parent, Colors, Angle)
    local Grad = Instance.new("UIGradient")
    Grad.Parent = Parent
    Grad.Color = ColorSequence.new(Colors)
    Grad.Rotation = Angle or 90 -- Default to vertical gradient
    return Grad
end

local function CreateShadow(Parent, Transparency, OffsetX, OffsetY, SizeX, SizeY)
    local Shadow = Instance.new("Frame")
    Shadow.Parent = Parent
    Shadow.BackgroundTransparency = 1
    Shadow.Size = UDim2.new(0, SizeX or 0, 0, SizeY or 0)
    Shadow.Position = UDim2.new(0, OffsetX or 0, 0, OffsetY or 0)
    Shadow.ZIndex = 0 -- Behind content
    
    local InnerShadow = Instance.new("Frame")
    InnerShadow.Parent = Shadow
    InnerShadow.BackgroundColor3 = Library.Theme.ShadowColor
    InnerShadow.BackgroundTransparency = Transparency
    InnerShadow.Size = UDim2.new(1, 0, 1, 0)
    InnerShadow.ClipDescendants = true -- For softer edges
    
    local InnerCorner = Instance.new("UICorner")
    InnerCorner.CornerRadius = UDim.new(0, 6) -- Match parent corner
    InnerCorner.Parent = InnerShadow
    
    return Shadow
end

local function IsMobile()
    return UserInputService.ScreenSize.X < Library.Responsive.MobileBreakpoint
end

local function GetScale()
    return IsMobile() and Library.Responsive.MobileScale or Library.Responsive.DesktopScale
end

local function GetSpacing()
    return IsMobile() and Library.Responsive.MobileSpacing or Library.Responsive.DesktopSpacing
end

local function MakeDraggable(dragHandle, targetFrame)
    local Dragging = false
    local DragStart = nil
    local StartPosition = nil

    local function UpdateDrag(input)
        local Delta = input.Position - DragStart
        local Position = UDim2.new(StartPosition.X.Scale, StartPosition.X.Offset + Delta.X, StartPosition.Y.Scale, StartPosition.Y.Offset + Delta.Y)
        TweenService:Create(targetFrame, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = Position}):Play()
    end

    dragHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            Dragging = true
            DragStart = input.Position
            StartPosition = targetFrame.Position
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if Dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            UpdateDrag(input)
        end
    end)

    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            Dragging = false
        end
    end)
end

local function CreateRipple(parent, color, position, size)
    local ripple = Instance.new("ImageLabel")
    ripple.Parent = parent
    ripple.BackgroundTransparency = 1
    ripple.Image = "rbxassetid://6031063555" -- Placeholder for a circle image
    ripple.ImageColor3 = color or Color3.fromRGB(255,255,255)
    ripple.ImageTransparency = 0.7
    ripple.ZIndex = 10 -- Ensure it's on top
    
    ripple.AnchorPoint = Vector2.new(0.5, 0.5)
    ripple.Position = position or UDim2.new(0.5, 0, 0.5, 0)
    ripple.Size = UDim2.new(0, 0, 0, 0)

    local tweenInfo = TweenInfo.new(0.6, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(ripple, tweenInfo, {
        Size = UDim2.new(0, size or 200, 0, size or 200),
        ImageTransparency = 1
    })
    
    tween:Play()
    tween.Completed:Wait()
    ripple:Destroy()
end

--// Main Library Function
function Library:Window(options)
    local Title = options.Title or "Velour UI"
    
    -- ScreenGui Setup
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "VantaLib"
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.ResetOnSpawn = false
    if RunService:IsStudio() then
        ScreenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
    else
        ScreenGui.Parent = CoreGui
    end

    -- Main Window Frame
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Parent = ScreenGui
    MainFrame.BackgroundColor3 = Library.Theme.Primary
    MainFrame.Size = UDim2.new(0, IsMobile() and 550 * Library.Responsive.MobileScale or 550, 0, IsMobile() and 350 * Library.Responsive.MobileScale or 350)
    MainFrame.Position = UDim2.new(0.5, -MainFrame.Size.X.Offset / 2, 0.5, -MainFrame.Size.Y.Offset / 2)
    MainFrame.BorderSizePixel = 0
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 8)
    MainCorner.Parent = MainFrame
    
    local MainStroke = Instance.new("UIStroke")
    MainStroke.Parent = MainFrame
    MainStroke.Color = Library.Theme.Outline
    MainStroke.Thickness = 1

    -- Simulated Shadow
    local MainShadow = CreateShadow(MainFrame, Library.Theme.ShadowTransparency, 0, 2, MainFrame.Size.X.Offset, MainFrame.Size.Y.Offset)
    MainShadow.Parent = ScreenGui -- Placed outside MainFrame to cast a shadow over it
    MainShadow.Size = MainFrame.Size
    MainShadow.Position = UDim2.new(0.5, -MainFrame.Size.X.Offset / 2, 0.5, -MainFrame.Size.Y.Offset / 2 + 2) -- Slightly offset down

    -- Gradient Background for Main Frame
    CreateGradient(MainFrame, Library.Theme.PrimaryGradient, 180) -- Horizontal gradient

    -- Title Bar
    local TitleBar = Instance.new("Frame")
    TitleBar.Name = "TitleBar"
    TitleBar.Parent = MainFrame
    TitleBar.BackgroundColor3 = Library.Theme.Primary
    TitleBar.Size = UDim2.new(1, 0, 0, 40)
    TitleBar.BorderSizePixel = 0
    
    local TitleBarCorner = Instance.new("UICorner")
    TitleBarCorner.CornerRadius = UDim.new(0, 8)
    TitleBarCorner.Parent = TitleBar
    TitleBarCorner.TopLeft = true
    TitleBarCorner.TopRight = true

    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Parent = TitleBar
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Position = UDim2.new(0, 15, 0, 0)
    TitleLabel.Size = UDim2.new(1, -30, 1, 0)
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.Text = Title
    TitleLabel.TextColor3 = Library.Theme.Text
    TitleLabel.TextSize = IsMobile() and 16 or 18
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    TitleLabel.TextYAlignment = Enum.TextYAlignment.Center

    -- Close Button (Optional, for better UI control)
    local CloseButton = Instance.new("TextButton")
    CloseButton.Parent = TitleBar
    CloseButton.BackgroundColor3 = Color3.new(1,1,1)
    CloseButton.BackgroundTransparency = 1
    CloseButton.Size = UDim2.new(0, 30, 1, 0)
    CloseButton.Position = UDim2.new(1, -35, 0, 0)
    CloseButton.Font = Enum.Font.SourceSansBold
    CloseButton.Text = "X"
    CloseButton.TextColor3 = Library.Theme.TextMuted
    CloseButton.TextSize = 16
    CloseButton.AutoButtonColor = false
    CloseButton.ZIndex = 10
    
    CloseButton.MouseEnter:Connect(function()
        TweenService:Create(CloseButton, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(255, 50, 50)}):Play()
    end)
    CloseButton.MouseLeave:Connect(function()
        TweenService:Create(CloseButton, TweenInfo.new(0.2), {TextColor3 = Library.Theme.TextMuted}):Play()
    end)
    CloseButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)

    -- Make the window draggable via the title bar
    MakeDraggable(TitleBar, MainFrame)

    -- Layout for Sidebar and Content
    local Sidebar = Instance.new("Frame")
    Sidebar.Name = "Sidebar"
    Sidebar.Parent = MainFrame
    Sidebar.BackgroundColor3 = Library.Theme.Secondary
    Sidebar.Size = UDim2.new(0, IsMobile() and 120 * Library.Responsive.MobileScale or 150, 1, 0)
    Sidebar.Position = UDim2.new(0, 0, 0, 40)
    Sidebar.BorderSizePixel = 0

    local SidebarCorner = Instance.new("UICorner")
    SidebarCorner.CornerRadius = UDim.new(0, 6)
    SidebarCorner.Parent = Sidebar
    SidebarCorner.BottomLeft = true -- Only round bottom left

    -- Content Area
    local ContentFrame = Instance.new("Frame")
    ContentFrame.Name = "ContentFrame"
    ContentFrame.Parent = MainFrame
    ContentFrame.BackgroundColor3 = Library.Theme.Primary -- Transparent background for gradients
    ContentFrame.Size = UDim2.new(1, -(Sidebar.Size.X.Offset + GetSpacing()), 1, -(40 + GetSpacing())) -- Adjust size dynamically
    ContentFrame.Position = UDim2.new(Sidebar.Size.X.Offset + GetSpacing(), 0, 40 + GetSpacing(), 0)
    ContentFrame.BorderSizePixel = 0

    -- Tab Container (for sidebar buttons)
    local TabContainer = Instance.new("Frame")
    TabContainer.Parent = Sidebar
    TabContainer.BackgroundTransparency = 1
    TabContainer.Position = UDim2.new(0, 0, 0, 40) -- Below tab title
    TabContainer.Size = UDim2.new(1, 0, 1, 0)
    TabContainer.ZIndex = 5
    
    local TabListLayout = Instance.new("UIListLayout")
    TabListLayout.Parent = TabContainer
    TabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabListLayout.Padding = UDim.new(0, GetSpacing() / 2) -- Less padding for mobile

    -- Pages Frame (holds content for each tab)
    local Pages = Instance.new("Frame")
    Pages.Name = "Pages"
    Pages.Parent = ContentFrame
    Pages.BackgroundTransparency = 1
    Pages.Size = UDim2.new(1, 0, 1, 0)
    Pages.ClipsDescendants = true

    local PageListLayout = Instance.new("UIListLayout") -- For elements within a page
    PageListLayout.Parent = Pages
    PageListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    PageListLayout.Padding = UDim.new(0, GetSpacing())
    PageListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    PageListLayout.VerticalAlignment = Enum.VerticalAlignment.Top

    local WindowElements = {}
    local ActiveTabButton = nil
    local ActivePageFrame = nil
    local FirstTab = true

    -- Function to handle tab selection
    local function SelectTab(tabButton, pageFrame)
        -- Animate out previous page
        if ActivePageFrame then
            local animateOutTween = TweenService:Create(ActivePageFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
                Position = UDim2.new(0.1, 0, 0, 0),
                BackgroundTransparency = 1
            })
            animateOutTween:Play()
            animateOutTween.Completed:Wait()
            ActivePageFrame.Visible = false
        end
        
        -- Animate in new page
        pageFrame.Visible = true
        pageFrame.Position = UDim2.new(0.1, 0, 0, 0) -- Start off-screen
        pageFrame.BackgroundTransparency = 0
        TweenService:Create(pageFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
            Position = UDim2.new(0, 0, 0, 0),
            BackgroundTransparency = 0
        }):Play()

        -- Update active tab button appearance
        if ActiveTabButton then
            TweenService:Create(ActiveTabButton.Indicator, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {BackgroundTransparency = 1}):Play()
            TweenService:Create(ActiveTabButton, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {TextColor3 = Library.Theme.TextMuted}):Play()
        end
        
        TweenService:Create(tabButton.Indicator, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {BackgroundTransparency = 0}):Play()
        TweenService:Create(tabButton, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {TextColor3 = Library.Theme.Text}):Play()

        ActiveTabButton = tabButton
        ActivePageFrame = pageFrame
    end

    -- Tab Creation Function
    function WindowElements:Tab(name)
        -- Tab Button
        local TabButton = Instance.new("TextButton")
        TabButton.Parent = TabContainer
        TabButton.BackgroundColor3 = Color3.new(1,1,1)
        TabButton.BackgroundTransparency = 1
        TabButton.Size = UDim2.new(1, 0, 0, IsMobile() and 35 * Library.Responsive.MobileScale or 40)
        TabButton.Font = Enum.Font.GothamMedium
        TabButton.Text = name
        TabButton.TextColor3 = Library.Theme.TextMuted
        TabButton.TextSize = IsMobile() and 13 or 14
        TabButton.TextXAlignment = Enum.TextXAlignment.Center
        TabButton.AutoButtonColor = false
        TabButton.ZIndex = 6

        local Indicator = Instance.new("Frame")
        Indicator.Parent = TabButton
        Indicator.BackgroundColor3 = Library.Theme.Accent
        Indicator.Size = UDim2.new(0, 4, 0, 10)
        Indicator.Position = UDim2.new(0.5, -2, 0, 0)
        Indicator.BorderSizePixel = 0
        Indicator.BackgroundTransparency = 1 -- Hidden by default
        
        local IndicatorCorner = Instance.new("UICorner")
        IndicatorCorner.CornerRadius = UDim.new(0, 4)
        IndicatorCorner.Parent = Indicator
        
        -- Store indicator on button for easy access
        TabButton.Indicator = Indicator

        -- Page Frame for the content
        local PageFrame = Instance.new("ScrollingFrame")
        PageFrame.Name = name .. "_Page"
        PageFrame.Parent = Pages
        PageFrame.BackgroundTransparency = 1
        PageFrame.Size = UDim2.new(1, 0, 1, 0)
        PageFrame.ScrollBarThickness = IsMobile() and 3 or 4
        PageFrame.ScrollBarImageColor3 = Library.Theme.Accent
        PageFrame.CanvasSize = UDim2.new(0, 0, 1, 0) -- Initialize for ScrollingFrame
        PageFrame.Visible = false
        
        -- Styling for the scrollbar track
        local ScrollBarTrack = Instance.new("Frame")
        ScrollBarTrack.Parent = PageFrame
        ScrollBarTrack.BackgroundColor3 = Library.Theme.Outline
        ScrollBarTrack.Size = UDim2.new(0, PageFrame.ScrollBarThickness.Offset + 2, 1, 0)
        ScrollBarTrack.Position = UDim2.new(1, -PageFrame.ScrollBarThickness.Offset - 2, 0, 0)
        ScrollBarTrack.Visible = true
        
        local ScrollBarTrackCorner = Instance.new("UICorner")
        ScrollBarTrackCorner.CornerRadius = UDim.new(0, 2)
        ScrollBarTrackCorner.Parent = ScrollBarTrack

        local PageContentLayout = Instance.new("UIListLayout")
        PageContentLayout.Parent = PageFrame
        PageContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
        PageContentLayout.Padding = UDim.new(0, GetSpacing())
        PageContentLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
        PageContentLayout.VerticalAlignment = Enum.VerticalAlignment.Top

        -- Handle Tab Click
        TabButton.MouseButton1Click:Connect(function()
            SelectTab(TabButton, PageFrame)
        end)

        -- Make the first tab active on load
        if FirstTab then
            FirstTab = false
            SelectTab(TabButton, PageFrame)
        end

        -- Elements API for this tab
        local ElementsAPI = {}

        function ElementsAPI:Label(text, type)
            local LabelFrame = Instance.new("Frame")
            LabelFrame.Parent = PageFrame
            LabelFrame.BackgroundColor3 = Library.Theme.Secondary
            LabelFrame.Size = UDim2.new(1, -GetSpacing() * 2, 0, type == "header" and 45 or 35)
            LabelFrame.BorderSizePixel = 0
            
            local LabelCorner = Instance.new("UICorner")
            LabelCorner.CornerRadius = UDim.new(0, 5)
            LabelCorner.Parent = LabelFrame
            
            local Text = Instance.new("TextLabel")
            Text.Parent = LabelFrame
            Text.BackgroundTransparency = 1
            Text.Position = UDim2.new(0, GetSpacing(), 0, 0)
            Text.Size = UDim2.new(1, -GetSpacing() * 2, 1, 0)
            Text.Font = type == "header" and Enum.Font.GothamBold or Enum.Font.Gotham
            Text.Text = text
            Text.TextColor3 = Library.Theme.Text
            Text.TextSize = type == "header" and (IsMobile() and 16 or 18) or (IsMobile() and 14 or 15)
            Text.TextXAlignment = Enum.TextXAlignment.Left
            Text.TextYAlignment = Enum.TextYAlignment.Center
            
            return {
                SetText = function(newText)
                    Text.Text = newText
                end
            }
        end

        function ElementsAPI:Button(text, callback, iconId)
            callback = callback or function() end
            
            local ButtonFrame = Instance.new("TextButton")
            ButtonFrame.Parent = PageFrame
            ButtonFrame.BackgroundColor3 = Library.Theme.Secondary
            ButtonFrame.Size = UDim2.new(1, -GetSpacing() * 2, 0, IsMobile() and 40 * Library.Responsive.MobileScale or 45)
            ButtonFrame.Text = ""
            ButtonFrame.AutoButtonColor = false
            ButtonFrame.ZIndex = 5

            local BtnCorner = Instance.new("UICorner")
            BtnCorner.CornerRadius = UDim.new(0, 5)
            BtnCorner.Parent = ButtonFrame
            
            local BtnStroke = Instance.new("UIStroke")
            BtnStroke.Parent = ButtonFrame
            BtnStroke.Color = Library.Theme.Outline
            BtnStroke.Thickness = 1
            BtnStroke.Transparency = 1 -- Invisible outline normally

            local Text = Instance.new("TextLabel")
            Text.Parent = ButtonFrame
            Text.BackgroundTransparency = 1
            Text.Position = UDim2.new(0, GetSpacing() * 1.5, 0, 0)
            Text.Size = UDim2.new(1, -(GetSpacing() * 3 + (iconId and 30 or 0)), 1, 0)
            Text.Font = Enum.Font.GothamMedium
            Text.Text = text
            Text.TextColor3 = Library.Theme.Text
            Text.TextSize = IsMobile() and 14 or 15
            Text.TextXAlignment = Enum.TextXAlignment.Left
            Text.TextYAlignment = Enum.TextYAlignment.Center
            
            if iconId then
                local Icon = Instance.new("ImageLabel")
                Icon.Parent = ButtonFrame
                Icon.BackgroundTransparency = 1
                Icon.Position = UDim2.new(1, -GetSpacing() * 2 - 20, 0.5, -10)
                Icon.Size = UDim2.new(0, 20, 0, 20)
                Icon.Image = "rbxassetid://" .. iconId
                Icon.ImageColor3 = Library.Theme.TextMuted
            end

            -- Interactions
            ButtonFrame.MouseEnter:Connect(function()
                TweenService:Create(ButtonFrame, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {BackgroundColor3 = Library.Theme.Primary}):Play()
                if ButtonFrame:FindFirstChild("ImageLabel") then
                    TweenService:Create(ButtonFrame.ImageLabel, TweenInfo.new(0.2), {ImageColor3 = Library.Theme.Accent}):Play()
                end
            end)

            ButtonFrame.MouseLeave:Connect(function()
                TweenService:Create(ButtonFrame, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {BackgroundColor3 = Library.Theme.Secondary}):Play()
                if ButtonFrame:FindFirstChild("ImageLabel") then
                    TweenService:Create(ButtonFrame.ImageLabel, TweenInfo.new(0.2), {ImageColor3 = Library.Theme.TextMuted}):Play()
                end
            end)

            ButtonFrame.MouseButton1Click:Connect(function()
                local mousePos = UserInputService:GetMouseLocation()
                CreateRipple(ButtonFrame, Library.Theme.Accent, UDim2.new(0, mousePos.X - ButtonFrame.AbsolutePosition.X, 0, mousePos.Y - ButtonFrame.AbsolutePosition.Y))
                callback()
            end)
        end

        function ElementsAPI:Toggle(text, default, callback)
            callback = callback or function() end
            local Toggled = default or false

            local ToggleFrame = Instance.new("TextButton")
            ToggleFrame.Parent = PageFrame
            ToggleFrame.BackgroundColor3 = Library.Theme.Secondary
            ToggleFrame.Size = UDim2.new(1, -GetSpacing() * 2, 0, IsMobile() and 40 * Library.Responsive.MobileScale or 45)
            ToggleFrame.Text = ""
            ToggleFrame.AutoButtonColor = false
            ToggleFrame.ZIndex = 5

            local TogCorner = Instance.new("UICorner")
            TogCorner.CornerRadius = UDim.new(0, 5)
            TogCorner.Parent = ToggleFrame

            local Label = Instance.new("TextLabel")
            Label.Parent = ToggleFrame
            Label.BackgroundTransparency = 1
            Label.Position = UDim2.new(0, GetSpacing(), 0, 0)
            Label.Size = UDim2.new(1, -60, 1, 0)
            Label.Font = Enum.Font.GothamMedium
            Label.Text = text
            Label.TextColor3 = Library.Theme.Text
            Label.TextSize = IsMobile() and 14 or 15
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.TextYAlignment = Enum.TextYAlignment.Center

            local SwitchBg = Instance.new("Frame")
            SwitchBg.Parent = ToggleFrame
            SwitchBg.BackgroundColor3 = Toggled and Library.Theme.Accent or Library.Theme.Outline
            SwitchBg.Position = UDim2.new(1, -GetSpacing() * 2 - (IsMobile() and 40 * Library.Responsive.MobileScale or 40), 0.5, -(IsMobile() and 10 * Library.Responsive.MobileScale or 10))
            SwitchBg.Size = UDim2.new(0, IsMobile() and 40 * Library.Responsive.MobileScale or 40, 0, IsMobile() and 20 * Library.Responsive.MobileScale or 20)
            
            local SwitchCorner = Instance.new("UICorner")
            SwitchCorner.CornerRadius = UDim.new(1, 0)
            SwitchCorner.Parent = SwitchBg

            local SwitchCircle = Instance.new("Frame")
            SwitchCircle.Parent = SwitchBg
            SwitchCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            SwitchCircle.Size = UDim2.new(0, IsMobile() and 16 * Library.Responsive.MobileScale or 16, 0, IsMobile() and 16 * Library.Responsive.MobileScale or 16)
            SwitchCircle.Position = Toggled and UDim2.new(1, -(IsMobile() and 18 * Library.Responsive.MobileScale or 18), 0.5, -(IsMobile() and 8 * Library.Responsive.MobileScale or 8)) or UDim2.new(0, IsMobile() and 2 * Library.Responsive.MobileScale or 2, 0.5, -(IsMobile() and 8 * Library.Responsive.MobileScale or 8))
            
            local CircleCorner = Instance.new("UICorner")
            CircleCorner.CornerRadius = UDim.new(1, 0)
            CircleCorner.Parent = SwitchCircle

            local function UpdateToggleVisuals()
                local TargetPos = Toggled and UDim2.new(1, -(IsMobile() and 18 * Library.Responsive.MobileScale or 18), 0.5, -(IsMobile() and 8 * Library.Responsive.MobileScale or 8)) or UDim2.new(0, IsMobile() and 2 * Library.Responsive.MobileScale or 2, 0.5, -(IsMobile() and 8 * Library.Responsive.MobileScale or 8))
                local TargetColor = Toggled and Library.Theme.Accent or Library.Theme.Outline
                
                TweenService:Create(SwitchCircle, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = TargetPos}):Play()
                TweenService:Create(SwitchBg, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {BackgroundColor3 = TargetColor}):Play()
                callback(Toggled)
            end

            ToggleFrame.MouseButton1Click:Connect(function()
                Toggled = not Toggled
                UpdateToggleVisuals()
            end)
            
            -- Initialize state
            if default then UpdateToggleVisuals() end
            return {
                GetState = function() return Toggled end,
                SetState = function(newState) 
                    Toggled = newState
                    UpdateToggleVisuals()
                end
            }
        end

        function ElementsAPI:Slider(text, min, max, default, callback)
            callback = callback or function() end
            local Value = default or min
            local SliderRange = max - min

            local SliderFrame = Instance.new("Frame")
            SliderFrame.Parent = PageFrame
            SliderFrame.BackgroundColor3 = Library.Theme.Secondary
            SliderFrame.Size = UDim2.new(1, -GetSpacing() * 2, 0, IsMobile() and 55 * Library.Responsive.MobileScale or 60)
            SliderFrame.BorderSizePixel = 0

            local SliderCorner = Instance.new("UICorner")
            SliderCorner.CornerRadius = UDim.new(0, 5)
            SliderCorner.Parent = SliderFrame

            local TopPart = Instance.new("Frame")
            TopPart.Parent = SliderFrame
            TopPart.BackgroundTransparency = 1
            TopPart.Position = UDim2.new(0, GetSpacing(), 0, 0)
            TopPart.Size = UDim2.new(1, -GetSpacing() * 2, 0, IsMobile() and 25 * Library.Responsive.MobileScale or 30)
            
            local Text = Instance.new("TextLabel")
            Text.Parent = TopPart
            Text.BackgroundTransparency = 1
            Text.Position = UDim2.new(0, 0, 0, 0)
            Text.Size = UDim2.new(1, -60, 1, 0)
            Text.Font = Enum.Font.GothamMedium
            Text.Text = text
            Text.TextColor3 = Library.Theme.Text
            Text.TextSize = IsMobile() and 14 or 15
            Text.TextXAlignment = Enum.TextXAlignment.Left
            Text.TextYAlignment = Enum.TextYAlignment.Center
            
            local ValueLabel = Instance.new("TextLabel")
            ValueLabel.Parent = TopPart
            ValueLabel.BackgroundTransparency = 1
            ValueLabel.Position = UDim2.new(1, -60, 0, 0)
            ValueLabel.Size = UDim2.new(0, 60, 1, 0)
            ValueLabel.Font = Enum.Font.Gotham
            ValueLabel.Text = tostring(Value)
            ValueLabel.TextColor3 = Library.Theme.TextMuted
            ValueLabel.TextSize = IsMobile() and 13 or 14
            ValueLabel.TextXAlignment = Enum.TextXAlignment.Right
            ValueLabel.TextYAlignment = Enum.TextYAlignment.Center

            local SliderBar = Instance.new("TextButton")
            SliderBar.Parent = SliderFrame
            SliderBar.BackgroundColor3 = Library.Theme.Outline
            SliderBar.Position = UDim2.new(0, GetSpacing(), IsMobile() and 30 * Library.Responsive.MobileScale or 35, 0)
            SliderBar.Size = UDim2.new(1, -GetSpacing() * 2, 0, IsMobile() and 6 * Library.Responsive.MobileScale or 7)
            SliderBar.Text = ""
            SliderBar.AutoButtonColor = false
            
            local BarCorner = Instance.new("UICorner")
            BarCorner.CornerRadius = UDim.new(1, 0)
            BarCorner.Parent = SliderBar

            local Fill = Instance.new("Frame")
            Fill.Parent = SliderBar
            Fill.BackgroundColor3 = Library.Theme.Accent
            Fill.Size = UDim2.new((Value - min) / SliderRange, 0, 1, 0)
            
            local FillCorner = Instance.new("UICorner")
            FillCorner.CornerRadius = UDim.new(1, 0)
            FillCorner.Parent = Fill

            local Thumb = Instance.new("Frame")
            Thumb.Parent = SliderBar
            Thumb.BackgroundColor3 = Color3.fromRGB(255,255,255)
            Thumb.Size = UDim2.new(0, IsMobile() and 14 * Library.Responsive.MobileScale or 16, 0, IsMobile() and 14 * Library.Responsive.MobileScale or 16)
            Thumb.Position = UDim2.new(math.clamp((Value - min) / SliderRange, 0, 1) - (Thumb.Size.X.Offset / SliderBar.Size.X.Offset / 2), 0, 0.5, -(Thumb.Size.Y.Offset / 2))

            local ThumbCorner = Instance.new("UICorner")
            ThumbCorner.CornerRadius = UDim.new(1, 0)
            ThumbCorner.Parent = Thumb

            local Dragging = false

            local function UpdateSliderPosition(input)
                local sliderBarSizeX = SliderBar.AbsoluteSize.X
                local mouseXRelativeToBar = input.Position.X - SliderBar.AbsolutePosition.X
                local normalizedPos = math.clamp(mouseXRelativeToBar / sliderBarSizeX, 0, 1)
                
                local newValue = math.floor(min + (SliderRange * normalizedPos))
                
                -- Clamp value to min/max
                newValue = math.max(min, math.min(max, newValue))
                
                local newFillSizeX = (newValue - min) / SliderRange
                
                TweenService:Create(Fill, TweenInfo.new(0.05), {Size = UDim2.new(newFillSizeX, 0, 1, 0)}):Play()
                TweenService:Create(Thumb, TweenInfo.new(0.05), {Position = UDim2.new(newFillSizeX - (Thumb.Size.X.Offset / sliderBarSizeX / 2), 0, 0.5, -(Thumb.Size.Y.Offset / 2))}):Play()
                ValueLabel.Text = tostring(newValue)
                
                callback(newValue)
            end

            SliderBar.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    Dragging = true
                    UpdateSliderPosition(input)
                end
            end)

            UserInputService.InputChanged:Connect(function(input)
                if Dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
                    UpdateSliderPosition(input)
                end
            end)

            UserInputService.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    Dragging = false
                end
            end)
            
            return {
                GetValue = function() return Value end,
                SetValue = function(newValue)
                    Value = math.max(min, math.min(max, newValue))
                    local newFillSizeX = (Value - min) / SliderRange
                    TweenService:Create(Fill, TweenInfo.new(0.1), {Size = UDim2.new(newFillSizeX, 0, 1, 0)}):Play()
                    TweenService:Create(Thumb, TweenInfo.new(0.1), {Position = UDim2.new(newFillSizeX - (Thumb.Size.X.Offset / SliderBar.Size.X.Offset / 2), 0, 0.5, -(Thumb.Size.Y.Offset / 2))}):Play()
                    ValueLabel.Text = tostring(Value)
                    callback(Value)
                end
            }
        end
        
        -- ElementsAPI:AddFunction("MyCustomElement", function() ... end) -- For future expansion

        return ElementsAPI
    end

    -- Notification Function
    function Library:Notify(text, duration, title)
        title = title or "Notification"
        duration = duration or 3
        
        local Notification = Instance.new("Frame")
        Notification.Name = "Notification"
        Notification.Parent = ScreenGui
        Notification.BackgroundColor3 = Library.Theme.Secondary
        Notification.Size = UDim2.new(0, IsMobile() and 250 * Library.Responsive.MobileScale or 300, 0, 60)
        Notification.Position = UDim2.new(1, 50, 1, -80) -- Start off-screen right
        Notification.BorderSizePixel = 0
        
        local NotifCorner = Instance.new("UICorner")
        NotifCorner.CornerRadius = UDim.new(0, 6)
        NotifCorner.Parent = Notification
        
        local NotifStroke = Instance.new("UIStroke")
        NotifStroke.Parent = Notification
        NotifStroke.Color = Library.Theme.Accent
        NotifStroke.Thickness = 1

        local TitleLabel = Instance.new("TextLabel")
        TitleLabel.Parent = Notification
        TitleLabel.BackgroundTransparency = 1
        TitleLabel.Position = UDim2.new(0, GetSpacing(), 0, GetSpacing())
        TitleLabel.Size = UDim2.new(1, -GetSpacing() * 2, 0, IsMobile() and 20 * Library.Responsive.MobileScale or 20)
        TitleLabel.Font = Enum.Font.GothamBold
        TitleLabel.Text = title
        TitleLabel.TextColor3 = Library.Theme.Accent
        TitleLabel.TextSize = IsMobile() and 14 or 15
        TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
        TitleLabel.TextYAlignment = Enum.TextYAlignment.Center

        local DescLabel = Instance.new("TextLabel")
        DescLabel.Parent = Notification
        DescLabel.BackgroundTransparency = 1
        DescLabel.Position = UDim2.new(0, GetSpacing(), 0, (IsMobile() and 20 * Library.Responsive.MobileScale or 20) + GetSpacing())
        DescLabel.Size = UDim2.new(1, -GetSpacing() * 2, 1, -( (IsMobile() and 20 * Library.Responsive.MobileScale or 20) + GetSpacing() * 2) )
        DescLabel.Font = Enum.Font.Gotham
        DescLabel.Text = text
        DescLabel.TextColor3 = Library.Theme.Text
        DescLabel.TextSize = IsMobile() and 13 or 14
        DescLabel.TextXAlignment = Enum.TextXAlignment.Left
        DescLabel.TextYAlignment = Enum.TextYAlignment.Top
        DescLabel.TextWrapped = true

        -- Enter Animation
        TweenService:Create(Notification, TweenInfo.new(0.5, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
            Position = UDim2.new(1, -Notification.Size.X.Offset - GetSpacing(), 1, -Notification.Size.Y.Offset - GetSpacing())
        }):Play()
        
        -- Auto Close
        delay(duration, function()
            local CloseTween = TweenService:Create(Notification, TweenInfo.new(0.5, Enum.EasingStyle.Quart, Enum.EasingDirection.In), {
                Position = UDim2.new(1, 50, 1, -80) -- Move off-screen right
            })
            CloseTween:Play()
            CloseTween.Completed:Wait()
            Notification:Destroy()
        end)
    end
    
    -- Toggle UI Visibility
    local uiEnabled = true
    UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
        if gameProcessedEvent then return end
        if input.KeyCode == Enum.KeyCode.RightControl then -- Default keybind
            uiEnabled = not uiEnabled
            ScreenGui.Enabled = uiEnabled
        end
    end)
    
    -- Initial UI State
    ScreenGui.Enabled = uiEnabled

    return WindowElements
end

return Library
