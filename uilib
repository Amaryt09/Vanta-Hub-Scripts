-- Luma Hub UI Library v2.0 - Sleek & Compact
-- Ultra-smooth animations with dark modern design

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local LumaHub = {}
LumaHub.__index = LumaHub

-- Sleek Dark Theme
local Theme = {
    Background = Color3.fromRGB(10, 10, 15),
    Secondary = Color3.fromRGB(18, 18, 25),
    Tertiary = Color3.fromRGB(25, 25, 35),
    Accent = Color3.fromRGB(147, 51, 234), -- Purple
    AccentDark = Color3.fromRGB(120, 40, 200),
    Text = Color3.fromRGB(255, 255, 255),
    SubText = Color3.fromRGB(150, 150, 160),
    Border = Color3.fromRGB(40, 40, 50),
    Success = Color3.fromRGB(34, 197, 94),
    Danger = Color3.fromRGB(239, 68, 68),
}

local function tween(obj, props, time, style, dir)
    return TweenService:Create(obj, TweenInfo.new(time or 0.3, style or Enum.EasingStyle.Quart, dir or Enum.EasingDirection.Out), props):Play()
end

local function corner(parent, radius)
    local c = Instance.new("UICorner")
    c.CornerRadius = UDim.new(0, radius or 8)
    c.Parent = parent
    return c
end

local function stroke(parent, color, thickness)
    local s = Instance.new("UIStroke")
    s.Color = color or Theme.Border
    s.Thickness = thickness or 1
    s.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    s.Parent = parent
    return s
end

function LumaHub:New(title)
    local gui = Instance.new("ScreenGui")
    gui.Name = "LumaHub"
    gui.ResetOnSpawn = false
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    gui.Parent = player:WaitForChild("PlayerGui")

    -- Main Window (Smaller & Sleeker)
    local main = Instance.new("Frame")
    main.Size = UDim2.new(0, 0, 0, 0)
    main.Position = UDim2.new(0.5, 0, 0.5, 0)
    main.AnchorPoint = Vector2.new(0.5, 0.5)
    main.BackgroundColor3 = Theme.Background
    main.BorderSizePixel = 0
    main.ClipsDescendants = true
    main.Parent = gui

    corner(main, 12)
    stroke(main, Theme.Border, 1)

    -- Subtle glow
    local glow = Instance.new("ImageLabel")
    glow.Image = "rbxassetid://4996891970"
    glow.ImageColor3 = Theme.Accent
    glow.ImageTransparency = 0.85
    glow.Size = UDim2.new(1, 30, 1, 30)
    glow.Position = UDim2.new(0, -15, 0, -15)
    glow.BackgroundTransparency = 1
    glow.ZIndex = 0
    glow.Parent = main

    -- Compact Header
    local header = Instance.new("Frame")
    header.Size = UDim2.new(1, 0, 0, 45)
    header.BackgroundColor3 = Theme.Secondary
    header.BorderSizePixel = 0
    header.Parent = main

    corner(header, 12)

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, -60, 1, 0)
    titleLabel.Position = UDim2.new(0, 15, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title or "Luma Hub"
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 16
    titleLabel.TextColor3 = Theme.Text
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = header

    -- Minimize Button
    local minimizeBtn = Instance.new("TextButton")
    minimizeBtn.Size = UDim2.new(0, 28, 0, 28)
    minimizeBtn.Position = UDim2.new(1, -68, 0, 8.5)
    minimizeBtn.BackgroundColor3 = Theme.Tertiary
    minimizeBtn.Text = "â€”"
    minimizeBtn.Font = Enum.Font.GothamBold
    minimizeBtn.TextSize = 14
    minimizeBtn.TextColor3 = Theme.Text
    minimizeBtn.BorderSizePixel = 0
    minimizeBtn.Parent = header

    corner(minimizeBtn, 7)

    local minimized = false
    minimizeBtn.MouseButton1Click:Connect(function()
        minimized = not minimized
        if minimized then
            tween(main, {Size = UDim2.new(0, 480, 0, 45)}, 0.3)
            minimizeBtn.Text = "â–¡"
        else
            tween(main, {Size = UDim2.new(0, 480, 0, 380)}, 0.3)
            minimizeBtn.Text = "â€”"
        end
    end)

    minimizeBtn.MouseEnter:Connect(function()
        tween(minimizeBtn, {BackgroundColor3 = Theme.Accent}, 0.2)
    end)

    minimizeBtn.MouseLeave:Connect(function()
        tween(minimizeBtn, {BackgroundColor3 = Theme.Tertiary}, 0.2)
    end)

    -- Close Button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 28, 0, 28)
    closeBtn.Position = UDim2.new(1, -35, 0, 8.5)
    closeBtn.BackgroundColor3 = Theme.Danger
    closeBtn.Text = "âœ•"
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 14
    closeBtn.TextColor3 = Theme.Text
    closeBtn.BorderSizePixel = 0
    closeBtn.Parent = header

    corner(closeBtn, 7)

    closeBtn.MouseButton1Click:Connect(function()
        tween(main, {Size = UDim2.new(0, 0, 0, 0)}, 0.2)
        task.wait(0.2)
        gui:Destroy()
    end)

    closeBtn.MouseEnter:Connect(function()
        tween(closeBtn, {BackgroundColor3 = Color3.fromRGB(255, 80, 80)}, 0.2)
    end)

    closeBtn.MouseLeave:Connect(function()
        tween(closeBtn, {BackgroundColor3 = Theme.Danger}, 0.2)
    end)

    -- Compact Tab Bar
    local tabBar = Instance.new("Frame")
    tabBar.Size = UDim2.new(1, -16, 0, 35)
    tabBar.Position = UDim2.new(0, 8, 0, 50)
    tabBar.BackgroundColor3 = Theme.Secondary
    tabBar.BorderSizePixel = 0
    tabBar.Parent = main

    corner(tabBar, 8)

    local tabList = Instance.new("UIListLayout")
    tabList.FillDirection = Enum.FillDirection.Horizontal
    tabList.Padding = UDim.new(0, 4)
    tabList.Parent = tabBar

    local tabPadding = Instance.new("UIPadding")
    tabPadding.PaddingTop = UDim.new(0, 4)
    tabPadding.PaddingBottom = UDim.new(0, 4)
    tabPadding.PaddingLeft = UDim.new(0, 4)
    tabPadding.PaddingRight = UDim.new(0, 4)
    tabPadding.Parent = tabBar

    -- Content Area
    local content = Instance.new("Frame")
    content.Size = UDim2.new(1, -16, 1, -100)
    content.Position = UDim2.new(0, 8, 0, 92)
    content.BackgroundTransparency = 1
    content.Parent = main

    -- Dragging
    local dragging, dragStart, startPos = false, nil, nil
    
    header.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = main.Position
        end
    end)

    header.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    -- Open animation
    tween(main, {Size = UDim2.new(0, 480, 0, 380)}, 0.4, Enum.EasingStyle.Back)

    return setmetatable({
        GUI = gui,
        Main = main,
        TabBar = tabBar,
        Content = content,
        Tabs = {},
        CurrentTab = nil
    }, LumaHub)
end

function LumaHub:CreateTab(name, icon)
    local tabBtn = Instance.new("TextButton")
    tabBtn.Size = UDim2.new(0, 0, 1, -8)
    tabBtn.BackgroundColor3 = Theme.Tertiary
    tabBtn.Text = ""
    tabBtn.AutoButtonColor = false
    tabBtn.BorderSizePixel = 0
    tabBtn.Parent = self.TabBar

    corner(tabBtn, 6)

    local iconLabel = Instance.new("TextLabel")
    iconLabel.Size = UDim2.new(0, 20, 1, 0)
    iconLabel.Position = UDim2.new(0, 8, 0, 0)
    iconLabel.BackgroundTransparency = 1
    iconLabel.Text = icon or "ðŸ“¦"
    iconLabel.Font = Enum.Font.GothamBold
    iconLabel.TextSize = 14
    iconLabel.TextColor3 = Theme.SubText
    iconLabel.Parent = tabBtn

    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, -36, 1, 0)
    nameLabel.Position = UDim2.new(0, 32, 0, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = name
    nameLabel.Font = Enum.Font.GothamSemibold
    nameLabel.TextSize = 12
    nameLabel.TextColor3 = Theme.SubText
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.Parent = tabBtn

    -- Auto-size based on text
    local textSize = game:GetService("TextService"):GetTextSize(name, 12, Enum.Font.GothamSemibold, Vector2.new(1000, 1000))
    tabBtn.Size = UDim2.new(0, textSize.X + 44, 1, -8)

    local scroll = Instance.new("ScrollingFrame")
    scroll.Size = UDim2.new(1, 0, 1, 0)
    scroll.BackgroundTransparency = 1
    scroll.BorderSizePixel = 0
    scroll.ScrollBarThickness = 3
    scroll.ScrollBarImageColor3 = Theme.Accent
    scroll.Visible = false
    scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
    scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    scroll.Parent = self.Content

    local list = Instance.new("UIListLayout")
    list.Padding = UDim.new(0, 8)
    list.SortOrder = Enum.SortOrder.LayoutOrder
    list.Parent = scroll

    local padding = Instance.new("UIPadding")
    padding.PaddingTop = UDim.new(0, 8)
    padding.PaddingBottom = UDim.new(0, 8)
    padding.PaddingRight = UDim.new(0, 8)
    padding.Parent = scroll

    local function select()
        for _, tab in pairs(self.Tabs) do
            tab.Button.BackgroundColor3 = Theme.Tertiary
            tab.NameLabel.TextColor3 = Theme.SubText
            tab.IconLabel.TextColor3 = Theme.SubText
            tab.Content.Visible = false
        end
        tween(tabBtn, {BackgroundColor3 = Theme.Accent}, 0.2)
        tween(nameLabel, {TextColor3 = Theme.Text}, 0.2)
        tween(iconLabel, {TextColor3 = Theme.Text}, 0.2)
        scroll.Visible = true
        self.CurrentTab = name
    end

    tabBtn.MouseButton1Click:Connect(select)

    tabBtn.MouseEnter:Connect(function()
        if self.CurrentTab ~= name then
            tween(tabBtn, {BackgroundColor3 = Color3.fromRGB(35, 35, 45)}, 0.15)
        end
    end)

    tabBtn.MouseLeave:Connect(function()
        if self.CurrentTab ~= name then
            tween(tabBtn, {BackgroundColor3 = Theme.Tertiary}, 0.15)
        end
    end)

    local tab = {
        Button = tabBtn,
        NameLabel = nameLabel,
        IconLabel = iconLabel,
        Content = scroll
    }

    self.Tabs[name] = tab

    if not self.CurrentTab then select() end

    return tab
end

function LumaHub:AddButton(tab, text, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, 36)
    btn.BackgroundColor3 = Theme.Secondary
    btn.Text = text
    btn.Font = Enum.Font.GothamSemibold
    btn.TextSize = 13
    btn.TextColor3 = Theme.Text
    btn.AutoButtonColor = false
    btn.BorderSizePixel = 0
    btn.Parent = tab.Content

    corner(btn, 8)

    btn.MouseButton1Click:Connect(function()
        tween(btn, {BackgroundColor3 = Theme.Accent}, 0.1)
        task.wait(0.1)
        tween(btn, {BackgroundColor3 = Theme.Secondary}, 0.1)
        pcall(callback)
    end)

    btn.MouseEnter:Connect(function()
        tween(btn, {BackgroundColor3 = Theme.Tertiary}, 0.15)
    end)

    btn.MouseLeave:Connect(function()
        tween(btn, {BackgroundColor3 = Theme.Secondary}, 0.15)
    end)

    return btn
end

function LumaHub:AddToggle(tab, text, default, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 36)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    corner(frame, 8)

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -55, 1, 0)
    label.Position = UDim2.new(0, 12, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 13
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local toggle = Instance.new("TextButton")
    toggle.Size = UDim2.new(0, 42, 0, 22)
    toggle.Position = UDim2.new(1, -50, 0.5, -11)
    toggle.BackgroundColor3 = default and Theme.Success or Theme.Border
    toggle.Text = ""
    toggle.AutoButtonColor = false
    toggle.BorderSizePixel = 0
    toggle.Parent = frame

    corner(toggle, 11)

    local circle = Instance.new("Frame")
    circle.Size = UDim2.new(0, 16, 0, 16)
    circle.Position = default and UDim2.new(1, -19, 0.5, -8) or UDim2.new(0, 3, 0.5, -8)
    circle.BackgroundColor3 = Theme.Text
    circle.BorderSizePixel = 0
    circle.Parent = toggle

    corner(circle, 8)

    local state = default or false

    toggle.MouseButton1Click:Connect(function()
        state = not state
        tween(toggle, {BackgroundColor3 = state and Theme.Success or Theme.Border}, 0.2)
        tween(circle, {Position = state and UDim2.new(1, -19, 0.5, -8) or UDim2.new(0, 3, 0.5, -8)}, 0.2, Enum.EasingStyle.Back)
        pcall(callback, state)
    end)

    return frame
end

function LumaHub:AddSlider(tab, text, min, max, default, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 50)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    corner(frame, 8)

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -50, 0, 18)
    label.Position = UDim2.new(0, 12, 0, 6)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 13
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local value = Instance.new("TextLabel")
    value.Size = UDim2.new(0, 50, 0, 18)
    value.Position = UDim2.new(1, -55, 0, 6)
    value.BackgroundTransparency = 1
    value.Text = tostring(default)
    value.Font = Enum.Font.GothamBold
    value.TextSize = 12
    value.TextColor3 = Theme.Accent
    value.TextXAlignment = Enum.TextXAlignment.Right
    value.Parent = frame

    local sliderBack = Instance.new("Frame")
    sliderBack.Size = UDim2.new(1, -24, 0, 4)
    sliderBack.Position = UDim2.new(0, 12, 1, -14)
    sliderBack.BackgroundColor3 = Theme.Tertiary
    sliderBack.BorderSizePixel = 0
    sliderBack.Parent = frame

    corner(sliderBack, 2)

    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    sliderFill.BackgroundColor3 = Theme.Accent
    sliderFill.BorderSizePixel = 0
    sliderFill.Parent = sliderBack

    corner(sliderFill, 2)

    local sliderBtn = Instance.new("TextButton")
    sliderBtn.Size = UDim2.new(0, 14, 0, 14)
    sliderBtn.Position = UDim2.new((default - min) / (max - min), -7, 0.5, -7)
    sliderBtn.BackgroundColor3 = Theme.Text
    sliderBtn.Text = ""
    sliderBtn.AutoButtonColor = false
    sliderBtn.BorderSizePixel = 0
    sliderBtn.Parent = sliderBack

    corner(sliderBtn, 7)

    local dragging = false

    local function update(input)
        local pos = math.clamp((input.Position.X - sliderBack.AbsolutePosition.X) / sliderBack.AbsoluteSize.X, 0, 1)
        local val = math.floor(min + (max - min) * pos)

        sliderFill.Size = UDim2.new(pos, 0, 1, 0)
        sliderBtn.Position = UDim2.new(pos, -7, 0.5, -7)
        value.Text = tostring(val)

        pcall(callback, val)
    end

    sliderBtn.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            tween(sliderBtn, {Size = UDim2.new(0, 18, 0, 18)}, 0.15)
        end
    end)

    sliderBtn.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
            tween(sliderBtn, {Size = UDim2.new(0, 14, 0, 14)}, 0.15)
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            update(input)
        end
    end)

    sliderBack.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            update(input)
        end
    end)

    return frame
end

function LumaHub:AddTextbox(tab, text, placeholder, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 36)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    corner(frame, 8)

    local box = Instance.new("TextBox")
    box.Size = UDim2.new(1, -24, 1, -8)
    box.Position = UDim2.new(0, 12, 0, 4)
    box.BackgroundTransparency = 1
    box.PlaceholderText = placeholder or text
    box.Text = ""
    box.Font = Enum.Font.GothamSemibold
    box.TextSize = 13
    box.TextColor3 = Theme.Text
    box.PlaceholderColor3 = Theme.SubText
    box.TextXAlignment = Enum.TextXAlignment.Left
    box.ClearTextOnFocus = false
    box.Parent = frame

    box.Focused:Connect(function()
        tween(frame, {BackgroundColor3 = Theme.Tertiary}, 0.15)
    end)

    box.FocusLost:Connect(function(enter)
        tween(frame, {BackgroundColor3 = Theme.Secondary}, 0.15)
        if enter then pcall(callback, box.Text) end
    end)

    return box
end

function LumaHub:AddLabel(tab, text)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 24)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.Gotham
    label.TextSize = 12
    label.TextColor3 = Theme.SubText
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = tab.Content

    return label
end

function LumaHub:AddDropdown(tab, text, options, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 36)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    corner(frame, 8)

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 1, 0)
    btn.BackgroundTransparency = 1
    btn.Text = ""
    btn.Parent = frame

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -35, 1, 0)
    label.Position = UDim2.new(0, 12, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 13
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local arrow = Instance.new("TextLabel")
    arrow.Size = UDim2.new(0, 20, 1, 0)
    arrow.Position = UDim2.new(1, -25, 0, 0)
    arrow.BackgroundTransparency = 1
    arrow.Text = "â–¼"
    arrow.Font = Enum.Font.GothamBold
    arrow.TextSize = 10
    arrow.TextColor3 = Theme.SubText
    arrow.Parent = frame

    local dropdown = Instance.new("Frame")
    dropdown.Size = UDim2.new(1, 0, 0, 0)
    dropdown.Position = UDim2.new(0, 0, 1, 4)
    dropdown.BackgroundColor3 = Theme.Secondary
    dropdown.BorderSizePixel = 0
    dropdown.ClipsDescendants = true
    dropdown.Visible = false
    dropdown.ZIndex = 5
    dropdown.Parent = frame

    corner(dropdown, 8)
    stroke(dropdown, Theme.Border, 1)

    local dropList = Instance.new("UIListLayout")
    dropList.Padding = UDim.new(0, 2)
    dropList.Parent = dropdown

    local dropPad = Instance.new("UIPadding")
    dropPad.PaddingAll = UDim.new(0, 4)
    dropPad.Parent = dropdown

    local open = false

    for _, option in ipairs(options) do
        local optBtn = Instance.new("TextButton")
        optBtn.Size = UDim2.new(1, 0, 0, 28)
        optBtn.BackgroundColor3 = Theme.Tertiary
        optBtn.Text = option
        optBtn.Font = Enum.Font.Gotham
        optBtn.TextSize = 12
        optBtn.TextColor3 = Theme.Text
        optBtn.AutoButtonColor = false
        optBtn.BorderSizePixel = 0
        optBtn.Parent = dropdown

        corner(optBtn, 6)

        optBtn.MouseButton1Click:Connect(function()
            label.Text = text .. ": " .. option
            open = false
            tween(dropdown, {Size = UDim2.new(1, 0, 0, 0)}, 0.2)
            tween(arrow, {Rotation = 0}, 0.2)
            task.wait(0.2)
            dropdown.Visible = false
            pcall(callback, option)
        end)

        optBtn.MouseEnter:Connect(function()
            tween(optBtn, {BackgroundColor3 = Theme.Accent}, 0.15)
        end)

        optBtn.MouseLeave:Connect(function()
            tween(optBtn, {BackgroundColor3 = Theme.Tertiary}, 0.15)
        end)
    end

    btn.MouseButton1Click:Connect(function()
        open = not open
        dropdown.Visible = true

        if open then
            local h = math.min(#options * 30 + 8, 150)
            tween(dropdown, {Size = UDim2.new(1, 0, 0, h)}, 0.2)
            tween(arrow, {Rotation = 180}, 0.2)
        else
            tween(dropdown, {Size = UDim2.new(1, 0, 0, 0)}, 0.2)
            tween(arrow, {Rotation = 0}, 0.2)
            task.wait(0.2)
            dropdown.Visible = false
        end
    end)

    return frame
end

function LumaHub:Notify(title, text, duration, type)
    local notif = Instance.new("Frame")
    notif.Size = UDim2.new(0, 0, 0, 65)
    notif.Position = UDim2.new(1, 10, 1, -75)
    notif.BackgroundColor3 = Theme.Secondary
    notif.BorderSizePixel = 0
    notif.ZIndex = 10
    notif.Parent = self.GUI

    corner(notif, 10)
    stroke(notif, Theme.Border, 1)

    local icon = Instance.new("TextLabel")
    icon.Size = UDim2.new(0, 40, 1, 0)
    icon.BackgroundTransparency = 1
    icon.Font = Enum.Font.GothamBold
    icon.TextSize = 22
    icon.TextColor3 = type == "success" and Theme.Success or type == "error" and Theme.Danger or Theme.Accent
    icon.Text = type == "success" and "âœ“" or type == "error" and "âœ•" or type == "warning" and "âš " or "â„¹"
    icon.Parent = notif

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, -50, 0, 20)
    titleLabel.Position = UDim2.new(0, 45, 0, 8)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 13
    titleLabel.TextColor3 = Theme.Text
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = notif

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, -50, 0, 28)
    textLabel.Position = UDim2.new(0, 45, 0, 28)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = text
    textLabel.Font = Enum.Font.Gotham
    textLabel.TextSize = 11
    textLabel.TextColor3 = Theme.SubText
    textLabel.TextXAlignment = Enum.TextXAlignment.Left
    textLabel.TextWrapped = true
    textLabel.Parent = notif

    tween(notif, {
        Size = UDim2.new(0, 280, 0, 65),
        Position = UDim2.new(1, -290, 1, -75)
    }, 0.3, Enum.EasingStyle.Back)

    local progress = Instance.new("Frame")
    progress.Size = UDim2.new(1, 0, 0, 2)
    progress.Position = UDim2.new(0, 0, 1, -2)
    progress.BackgroundColor3 = type == "success" and Theme.Success or type == "error" and Theme.Danger or type == "warning" and Theme.Warning or Theme.Accent
    progress.BorderSizePixel = 0
    progress.Parent = notif

    tween(progress, {Size = UDim2.new(0, 0, 0, 2)}, duration or 3, Enum.EasingStyle.Linear)

    task.wait(duration or 3)
    tween(notif, {Position = UDim2.new(1, 10, 1, -75)}, 0.2)
    task.wait(0.2)
    notif:Destroy()
end

function LumaHub:AddKeybind(tab, text, default, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 36)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    corner(frame, 8)

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -80, 1, 0)
    label.Position = UDim2.new(0, 12, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 13
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local keyBtn = Instance.new("TextButton")
    keyBtn.Size = UDim2.new(0, 65, 0, 24)
    keyBtn.Position = UDim2.new(1, -72, 0.5, -12)
    keyBtn.BackgroundColor3 = Theme.Tertiary
    keyBtn.Text = default or "None"
    keyBtn.Font = Enum.Font.GothamBold
    keyBtn.TextSize = 11
    keyBtn.TextColor3 = Theme.Accent
    keyBtn.AutoButtonColor = false
    keyBtn.BorderSizePixel = 0
    keyBtn.Parent = frame

    corner(keyBtn, 6)

    local binding = false
    local currentKey = default

    keyBtn.MouseButton1Click:Connect(function()
        binding = true
        keyBtn.Text = "..."
        tween(keyBtn, {BackgroundColor3 = Theme.Accent}, 0.15)
    end)

    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if binding and not gameProcessed then
            if input.KeyCode ~= Enum.KeyCode.Unknown then
                currentKey = input.KeyCode.Name
                keyBtn.Text = currentKey
                binding = false
                tween(keyBtn, {BackgroundColor3 = Theme.Tertiary}, 0.15)
                pcall(callback, input.KeyCode)
            end
        elseif not binding and currentKey and input.KeyCode.Name == currentKey then
            pcall(callback, input.KeyCode)
        end
    end)

    return frame
end

function LumaHub:AddColorPicker(tab, text, default, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 36)
    frame.BackgroundColor3 = Theme.Secondary
    frame.BorderSizePixel = 0
    frame.Parent = tab.Content

    corner(frame, 8)

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -50, 1, 0)
    label.Position = UDim2.new(0, 12, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 13
    label.TextColor3 = Theme.Text
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local colorBtn = Instance.new("TextButton")
    colorBtn.Size = UDim2.new(0, 28, 0, 28)
    colorBtn.Position = UDim2.new(1, -36, 0.5, -14)
    colorBtn.BackgroundColor3 = default or Color3.fromRGB(255, 255, 255)
    colorBtn.Text = ""
    colorBtn.AutoButtonColor = false
    colorBtn.BorderSizePixel = 0
    colorBtn.Parent = frame

    corner(colorBtn, 7)
    stroke(colorBtn, Theme.Border, 1)

    local currentColor = default or Color3.fromRGB(255, 255, 255)

    colorBtn.MouseButton1Click:Connect(function()
        local hue = tick() % 5 / 5
        currentColor = Color3.fromHSV(hue, 1, 1)
        tween(colorBtn, {BackgroundColor3 = currentColor}, 0.2)
        pcall(callback, currentColor)
    end)

    colorBtn.MouseEnter:Connect(function()
        tween(colorBtn, {Size = UDim2.new(0, 32, 0, 32)}, 0.15, Enum.EasingStyle.Back)
    end)

    colorBtn.MouseLeave:Connect(function()
        tween(colorBtn, {Size = UDim2.new(0, 28, 0, 28)}, 0.15, Enum.EasingStyle.Back)
    end)

    RunService.RenderStepped:Connect(function()
        local hue = (tick() % 10) / 10
        colorBtn.BackgroundColor3 = Color3.fromHSV(hue, 0.6, 1)
    end)

    return frame
end

function LumaHub:AddDivider(tab, text)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, 0, 0, 20)
    frame.BackgroundTransparency = 1
    frame.Parent = tab.Content

    if text then
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(0, 100, 1, 0)
        label.BackgroundTransparency = 1
        label.Text = text
        label.Font = Enum.Font.GothamBold
        label.TextSize = 11
        label.TextColor3 = Theme.SubText
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.Parent = frame

        local line = Instance.new("Frame")
        line.Size = UDim2.new(1, -110, 0, 1)
        line.Position = UDim2.new(0, 105, 0.5, 0)
        line.BackgroundColor3 = Theme.Border
        line.BorderSizePixel = 0
        line.Parent = frame
    else
        local line = Instance.new("Frame")
        line.Size = UDim2.new(1, 0, 0, 1)
        line.Position = UDim2.new(0, 0, 0.5, 0)
        line.BackgroundColor3 = Theme.Border
        line.BorderSizePixel = 0
        line.Parent = frame
    end

    return frame
end

return LumaHub
